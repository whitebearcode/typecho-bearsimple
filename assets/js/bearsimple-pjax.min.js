(function($){$.fn.extend({BsPjaxOptions:function(option){defaultSetting={scrollfixchrome:'true',};setting=$.extend(defaultSetting,option);getThis=this.prop("className")!==""?"."+this.prop("className"):this.prop("id")!==""?"#"+this.prop("id"):this.prop("nodeName");var pjax_id='#pjax';$(document).pjax('a[target!=_blank][rel!=group]',pjax_id,{fragment:pjax_id,timeout:50000});$(document).on('submit','form[role=search]',function(event){$.pjax.submit(event,'#pjax',{fragment:'#pjax',timeout:50000});});$(document).on('submit','#commentform',function(event){$.pjax.submit(event,'#pjax',{fragment:'#pjax',timeout:50000});});if(setting.search>0){$(document).on("click","[hrefx]",function(){var header=setting.header_search;var phone=setting.phone_search;var sidebar=setting.sidebar_search;if(header=='true'){var header_value=document.getElementById("pcsearch").value;}else{var header_value='';}if(phone=='true'){var phone_value=document.getElementById("phonesearch").value;}else{var phone_value='';}if(sidebar=='true'){var sidebar_value=document.getElementById("sidebarsearch").value;}else{var sidebar_value='';}$.pjax({url:$(this).attr("hrefx")+header_value+phone_value+sidebar_value,container:pjax_id,fragment:pjax_id,timeout:50000})})}$(document).on("click","[hrefs]",function(){var href=$(this).attr("hrefs");var target=$(this).attr("target");if(!target){$.pjax({url:href,container:pjax_id,fragment:pjax_id,timeout:50000})}else{window.open(href,target);}});$(document).on('pjax:start',function(){NProgress.start();});$(document).on('pjax:end',function(){$(function(){if(document.getElementById("comments")){$.getScript(setting.import+'assets/owo/OwO.min.js',function(){new OwO({logo:'OωO表情',container:document.getElementsByClassName('OwO')[0],target:document.getElementsByClassName('OwO-textarea')[0],api:setting.import+'assets/owo/OwO.json',position:'down',width:'90%',maxHeight:'250px',});});}});var commenturl=location.href+' ';if(commenturl.search("comment")!=-1){history.replaceState($.pjax.state,'',commenturl.replace('/comment ',''));}if(setting.menu_style=="2"){$(function(){var $mainMenuState=$('#main-menu-state');if($mainMenuState.length){$mainMenuState.change(function(e){var $menu=$('#main-menu');if(this.checked){$menu.hide().slideDown(450,function(){$menu.css('display','');});}else{$menu.show().slideUp(450,function(){$menu.css('display','');});}});$(window).on('beforeunload unload',function(){if($mainMenuState[0].checked){$mainMenuState[0].click();}});}});$(function(){$('#main-menu').smartmenus({mainMenuSubOffsetX:-1,mainMenuSubOffsetY:4,subMenusSubOffsetX:6,subMenusSubOffsetY:-6});});}NProgress.done();});$(document).on('pjax:complete',function(){$('.ui.equal.width.form').on('click','#randname',function(){const b=["大名鼎鼎","躲闪","骄傲","挺胸","不知名","知名","刚下飞机","看透一切","小有名气","潜心学习","生龙活虎","生气勃勃","说话诙谐","说话风趣","妙趣横生","妙语连珠","挤眉弄眼","天真活泼","天真烂漫","天真无邪","稚气未脱","聪明伶俐","机智灵巧","心灵手巧","能说会道","无忧无虑","无拘无束","开朗大方","幽默风趣","逗人发笑","憨直可爱","性格爽直","性格豪爽","直截了当","直言相告","直言不讳","有口无心","快嘴快舌","直抒已见","令人捧腹","饶有风趣","趣味盎然","心直口快","快人快语"],c=["大黄","匿名人士","男士","女士","人士","男孩","女孩","贫僧","道士","学生","打工人","少侠","白领","蓝领","小学生","初中生","高中生","大学生","研究生","博士生","教授"];var randname=b[Math.floor(Math.random()*b.length)]+"的"+c[Math.floor(Math.random()*c.length)];document.getElementById('author').value=randname;});if(setting.Reward_style=='1'){$.getScript(setting.import+"assets/javascript/donate.js");}if(setting.Login_hidden=="2"){$(function(){$("#loginbtn").click(function(){var loginurl=setting.loginAction+"&name="+document.getElementById("name").value+"&password="+document.getElementById("password").value
window.open('javascript:window.name;','<script>location.replace("'+loginurl+'")<\/script>');setTimeout(function(){window.location.reload();},2000);});});$(function(){$("#bs-login").click(function(){$('.mini.modal.login').modal({centered:true,closable:true,autofocus:false,observeChanges:true,onDeny:function(){},}).modal('show');});});}if(setting.RewardOpenAlipay=='true'){$(function(){$("#bs-alipay").click(function(){$('.mini.modal.alipay').modal({centered:true,closable:true,onDeny:function(){},}).modal('show');});});}if(setting.RewardOpenWechat=='true'){$(function(){$("#bs-wechat").click(function(){$('.mini.modal.wechat').modal({centered:true,closable:true,onDeny:function(){},}).modal('show');});});}$.getScript("https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js",function(){$('.ui.accordion').accordion();$('.ui.dropdown').dropdown({on:'hover'});$("body").on("click",".fluid.card .image",function(){$('.fluid.card .image').dimmer({on:'hover'});});$('.menu .item').tab();$('.special.cards .image').dimmer({on:'hover'});});if(setting.sticky=='true'){$.getScript(setting.import+"assets/js/sticky.min.js",function(){var elements=document.querySelectorAll('.sidebar');Stickyfill.add(elements);});}if(setting.imagebox=='true'){$.getScript("https://cdn.jsdelivr.net/npm/viewerjs@1.10.1/dist/viewer.min.js",function(){const gallery=new Viewer(document.getElementById('bearsimple-images'));});}if(setting.Watermark=='true'){if(setting.WatermarkType=='1'||setting.WatermarkType==''){if(setting.waterMarkOutput!=='null'||setting.waterMarkOutput!==''){$.getScript(setting.import+"assets/js/bearmark.min.js",function(){$('.bearmark').watermark({textBg:setting.Watermark_textBg,textColor:setting.Watermark_textColor,text:setting.Watermark_text,textWidth:setting.Watermark_textWidth,textSize:setting.Watermark_textSize,gravity:setting.Watermark_gravity,opacity:setting.Watermark_opacity,margin:setting.Watermark_margin,outputType:setting.Watermark_outputType});});}else{$.getScript(setting.import+"assets/js/bearmark.min.js",function(){$('.bearmark').watermark({textBg:setting.Watermark_textBg,textColor:setting.Watermark_textColor,text:setting.Watermark_text,textWidth:setting.Watermark_textWidth,textSize:setting.Watermark_textSize,gravity:setting.Watermark_gravity,opacity:setting.Watermark_opacity,margin:setting.Watermark_margin,});});}}else{if(setting.waterMarkOutput!=='null'||setting.waterMarkOutput!==''){$.getScript(setting.import+"assets/js/bearmark.min.js",function(){$('.bearmark').watermark({path:setting.Watermark_path,gravity:setting.Watermark_gravity,opacity:setting.Watermark_opacity,margin:setting.Watermark_margin,outputType:setting.Watermark_outputType});});}else{$.getScript(setting.import+"assets/js/bearmark.min.js",function(){$('.bearmark').watermark({path:setting.Watermark_path,gravity:setting.Watermark_gravity,opacity:setting.Watermark_opacity,margin:setting.Watermark_margin,});});}}}$(function(){$.getScript("//cdn.jsdelivr.net/gh/whitebearcode/translate_bearsimple/element1.js?cb=googleTranslateElementInit2",function(){})});if(setting.Top=='true'){$.getScript(setting.import+"assets/js/Top.js",function(){$('#js-go_top').gotoTop({offset:500,speed:300,animationShow:{'transform':'translate(0,0)','transition':'transform .5s ease-in-out'},animationHide:{'transform':'translate(80px,0)','transition':'transform .5s ease-in-out'}});});}if(setting.Scroll=='true'){$.getScript(setting.import+"assets/scroll/scroll.min.js");$.getScript(setting.import+"assets/scroll/scrollnav.min.js",function(){var bearsimplescroll=document.querySelector('#bearsimple-scroll');var articlenav=document.querySelector('#article-nav');scrollnav.init(bearsimplescroll,{insertTarget:articlenav,});});}if(setting.slider=='true'){$.getScript("https://cdn.jsdelivr.net/npm/@splidejs/splide@3.6.9/dist/js/splide.min.js",function(){var div=document.getElementsByTagName('div');for(var i=0;i<div.length;i++){if(div[i].className=='splide'){var splide=new Splide('.splide',{type:'slide',rewind:true,autoplay:true,});splide.mount();}}});}$.getScript("//cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js",function(){$('.ui.dropdown').dropdown({on:'hover'});});if(setting.Codehightlight=='1'){if(typeof Prism!=='undefined'){if(setting.showLineNumber=='1'){var showLineNumber='line-numbers';}var pres=document.getElementsByTagName('pre');for(var i=0;i<pres.length;i++){if(pres[i].getElementsByTagName('code').length>0)pres[i].className=showLineNumber+' language-php';document.getElementsByTagName('code').className='language-php';}Prism.highlightAll(true,null);}}if(setting.Wechat_qrcode_status=='true'){$('.wechat.icon.circular.link').on('click',function(){layer.open({type:1,area:['320px','310px'],title:'加我微信',shadeClose:true,content:'<center><img width="255" height="255" src="'+setting.Wechat_qrcode+'"></center>'});});}if(setting.QQ_qrcode_status=='true'){$('.qq.icon.circular.link').on('click',function(){layer.open({type:1,area:['320px','310px'],title:'加我QQ',shadeClose:true,content:'<center><img width="255" height="255" src="'+setting.QQ_qrcode+'"></center>'});});}if(setting.Share=='true'){$.getScript(setting.import+"assets/share/jquery.share.min.js",function(){$('#share').share();});}if(setting.Translate=='1'){if(setting.TranslateLanguage=='1'){var TranslateLanguage=2;}else{var TranslateLanguage=1;};$.getScript(setting.import2+"modules/tw_cn.js",function(){var defaultEncoding=TranslateLanguage;var translateDelay=0;var cookieDomain=setting.siteUrl;var msgToTraditionalChinese="繁体";var msgToSimplifiedChinese="简体";var translateButtonId="translateLink";translateInitilization();});}});if(typeof lazyload==="function"){$(document).on('pjax:complete',function(){jQuery(function(){jQuery("div").lazyload({effect:"fadeIn"});});jQuery(function(){jQuery("img").lazyload({effect:"fadeIn"});});});}else{console.log('BearSimple lazyload finished');}return this}})}(jQuery));